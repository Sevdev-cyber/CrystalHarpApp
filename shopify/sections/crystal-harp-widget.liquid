{% comment %}
  Crystal Harp Widget Section
  Renders an interactive 432Hz Crystal Harp player on product pages.
  The widget automatically detects the product and loads the correct scale.
{% endcomment %}

{%- liquid
  assign handle = product.handle
  assign scale_id = ''

  case handle
    when 'chakra-c-432hz-crystal-harp-sacred-forest'
      assign scale_id = 'chakra-c'
    when 'celtic-moon-d'
      assign scale_id = 'celtic-moon-d'
    when 'crystal-harp-sun-d-432hz'
      assign scale_id = 'celestial-sun-d'
    when 'earth-om-cis'
      assign scale_id = 'earth-om-c#'
    when 'mystic-e'
      assign scale_id = 'mystic-e'
    when 'stardust-c-crystal-harp-432-hz'
      assign scale_id = 'stardust-c#'
    when 'crystal-harp-planetary-c-432hz'
      assign scale_id = 'planetary-c'
    when 'travel-crystal-harp-lotus-432hz-premium'
      assign scale_id = 'chakra-c'
  endcase
-%}

{% if scale_id != '' %}
  <div
    class="crystal-harp-section"
    style="
      max-width: 720px;
      margin: 40px auto;
      padding: 0 16px;
    "
  >
    <h2
      class="crystal-harp-section__title"
      style="
        text-align: center;
        font-size: 1.4rem;
        font-weight: 500;
        letter-spacing: 0.06em;
        margin-bottom: 8px;
        color: var(--color-foreground, #1a1a2e);
      "
    >
      {{ section.settings.heading }}
    </h2>
    <p
      class="crystal-harp-section__subtitle"
      style="
        text-align: center;
        font-size: 0.92rem;
        opacity: 0.65;
        margin-bottom: 24px;
        color: var(--color-foreground, #1a1a2e);
      "
    >
      {{ section.settings.subheading }}
      {{ product.title }}
    </p>

    <div
      data-crystal-harp
      data-scale="{{ scale_id }}"
      data-app-url="https://sevdev-cyber.github.io/CrystalHarpApp/"
    ></div>
  </div>

  <script src="https://sevdev-cyber.github.io/CrystalHarpApp/crystal-harp-widget.iife.js" defer></script>
{% endif %}

{% schema %}
{
  "name": "Crystal Harp Player",
  "tag": "section",
  "class": "crystal-harp-widget-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "ðŸ”” Play Your Harp"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Tap the quartz tubes to hear it in 432 Hz"
    }
  ],
  "templates": ["product"],
  "presets": [
    {
      "name": "Crystal Harp Player"
    }
  ]
}
{% endschema %}
